import SwiftUI

enum Language: String, CaseIterable, Identifiable {
    case turkish = "tr"
    case english = "en"
    
    var id: String { self.rawValue }
    
    var displayName: String {
        switch self {
        case .turkish: return "T√ºrk√ße"
        case .english: return "English"
        }
    }
}

class LanguageService: ObservableObject {
    @AppStorage("selectedLanguage") var selectedLanguage: Language = .english
    @AppStorage("isFirstLaunch") var isFirstLaunch: Bool = true
    
    
    func s(_ key: String) -> String {
        return translations[selectedLanguage]?[key] ?? key
    }
    
    private let translations: [Language: [String: String]] = [
        .turkish: [
            "home": "Ana Sayfa",
            "downloading": "ƒ∞ndiriliyor",
            "queued": "Kuyrukta",
            "completed": "Tamamlandƒ±",
            "history": "Ge√ßmi≈ü",
            "keyring": "Kimlik Bilgileri",
            "settings": "Ayarlar",
            "new_download": "Yeni ƒ∞ndirme Ekle",
            "url_placeholder": "YouTube ve binlerce siteden video indirin",
            "stat_downloading": "ƒ∞ndiriliyor",
            "stat_queued": "Kuyrukta",
            "stat_completed": "Tamamlandƒ±",
            "stat_failed": "Hata",
            "empty_failed": "Ba≈üarƒ±sƒ±z indirme yok",
            "download_failed_error": "ƒ∞ndirme ba≈üarƒ±sƒ±z oldu: %@",
            "subtitle_download_failed": "Altyazƒ± indirilemedi: %@",
            "too_many_requests": "√áok fazla istek (429). L√ºtfen Ayarlar > Geli≈ümi≈ü kƒ±smƒ±ndan bir tarayƒ±cƒ± (√ßerez) se√ßin.",
            "preferences": "Ayarlar",
            "general": "Genel",
            "download": "ƒ∞ndirme",
            "advanced": "Geli≈ümi≈ü",
            "about": "Hakkƒ±nda",
            "theme": "Tema",
            "system": "Sistem",
            "light": "A√ßƒ±k",
            "dark": "Koyu",
            "language": "Dil",
            "save_folder": "Varsayƒ±lan Kayƒ±t Yeri",
            "select": "Se√ß...",
            "updates": "G√ºncellemeler",
            "check_updates": "Kontrol Et",
            "update_now": "G√ºncelle",
            "format_settings": "Format Ayarlarƒ±",
            "file_type": "Varsayƒ±lan Dosya Tipi",
            "video_quality": "Varsayƒ±lan Video Kalitesi",
            "embed_options": "G√∂mme Se√ßenekleri",
            "embed_thumbnail": "Kapak resmini g√∂m",
            "embed_metadata": "Metadata'yƒ± g√∂m",
            "concurrent_downloads": "E≈üzamanlƒ± ƒ∞ndirmeler",
            "max": "Maksimum",
            "sponsorblock_desc": "SponsorBlock, YouTube videolarƒ±ndaki sponsor segmentlerini otomatik olarak atlar.",
            "ytdlp_update": "yt-dlp'yi G√ºncelle",
            "update_complete": "‚úÖ G√ºncelleme tamamlandƒ±!",
            "update_error": "‚ùå Hata:",
            "downloading_ytdlp": "ƒ∞ndiriliyor...",
            "version": "Versiyon",
            "special_thanks": "√ñzel Te≈üekk√ºr",
            "credits": "Katkƒ±da Bulunanlar",
            "license": "Lisans",
            "license_desc": "Bu yazƒ±lƒ±m √∂zg√ºr yazƒ±lƒ±mdƒ±r. Deƒüi≈ütirebilir ve daƒüƒ±tabilirsiniz.",
            "supported_sites": "Desteklenen Siteler",
            "other": "Diƒüer",
            "empty_downloading": "≈ûu an indirilen video yok",
            "empty_queued": "Kuyrukta bekleyen video yok",
            "empty_completed": "Tamamlandƒ± indirme yok",
            "video": "Video",
            "audio": "Ses",
            "default_video_resolution": "Varsayƒ±lan Video √á√∂z√ºn√ºrl√ºƒü√º",
            "sponsorblock": "SponsorBlock",
            "app_updates": "Uygulama G√ºncellemesi",
            "app_up_to_date": "Uygulama g√ºncel",
            "downloading_update": "G√ºncelleme indiriliyor...",
            "installing_update": "G√ºncelleme kuruluyor ve yeniden ba≈ülatƒ±lƒ±yor...",
            "update_failed": "G√ºncelleme ba≈üarƒ±sƒ±z oldu!",
            "restart_to_install": "Yeniden Ba≈ülat ve Kur",
            "update_available_title": "Yeni G√ºncelleme Mevcut!",
            "update_available_message": "Macabolic'in yeni s√ºr√ºm√º (v%@) hazƒ±r. ≈ûimdi indirmek ister misiniz?",
            "later": "Daha Sonra",
            "whats_new_title": "Macabolic v2.3.0 - Yenilikler",
            "whats_new_message": "‚Ä¢ üóÑÔ∏è Geli≈ümi≈ü Ge√ßmi≈ü Y√∂netimi: Tamamlanan ve hatalƒ± indirmeler artƒ±k ayrƒ± listelerde tutuluyor ve uygulama kapatƒ±lsa bile kalƒ±cƒ± olarak saklanƒ±yor.\n‚Ä¢ üìÇ Yenilenen Navigasyon: Kenar √ßubuƒüu 'ƒ∞ndirmeler' ve 'Ge√ßmi≈ü' olarak iki ana b√∂l√ºme ayrƒ±larak kullanƒ±m kolaylƒ±ƒüƒ± saƒülandƒ±.\n‚Ä¢ üîÑ Otomatik G√ºncelleme: ƒ∞ndirme durumlarƒ± ve sayƒ±larƒ± artƒ±k anlƒ±k olarak kendiliƒüinden g√ºncelleniyor.\n‚Ä¢ üîÉ Yeniden ƒ∞ndir: Tamamlanan veya durdurulan videolarƒ± tek tƒ±kla tekrar indirme listesine ekleme √∂zelliƒüi eklendi.\n‚Ä¢ üç™ Akƒ±llƒ± Y√∂nlendirme: Hƒ±z limiti (429) hatalarƒ±nda kullanƒ±cƒ±lar doƒürudan √áerez ayarlarƒ±na y√∂nlendirilerek √ß√∂z√ºm odaklƒ± rehberlik saƒülandƒ±.",
            "app_up_to_date": "Uygulama zaten g√ºncel",
            "downloading_update": "G√ºncelleme indiriliyor...",
            "installing_update": "G√ºncelleme kuruluyor ve yeniden ba≈ülatƒ±lƒ±yor...",
            "update_failed": "G√ºncelleme ba≈üarƒ±sƒ±z oldu!",
            "restart_to_install": "Yeniden Ba≈ülat ve Kur",
            "latest": "En son",
            "original_project": "Orijinal Proje",
            "view_license": "Lisansƒ± G√∂r√ºnt√ºle",
            "app_desc": "YouTube ve binlerce siteden video indirmenizi saƒülayan modern bir macOS uygulamasƒ±.",
            "extra_settings": "Ekstra Ayarlar",
            "video_url": "Video URL'si",
            "url_hint": "YouTube, Vimeo, Twitter ve daha fazlasƒ±...",
            "additional_arguments": "Ek Komutlar (Advanced)",
            "additional_arguments_hint": "√ñrn: --limit-rate 5M --restrict-filenames",
            "additional_arguments_help": "T√ºm komutlarƒ± g√∂rmek i√ßin [resmi dok√ºmantasyona](https://github.com/yt-dlp/yt-dlp#usage-and-options) bakabilirsiniz.",
            "paste_from_clipboard": "Panodan Yapƒ±≈ütƒ±r",
            "fetch_info": "Bilgi Al",
            "quality": "Kalite",
            "custom_filename_hint": "Dosya adƒ± (bo≈ü bƒ±rakƒ±lƒ±rsa video ba≈ülƒ±ƒüƒ± kullanƒ±lƒ±r)",
            "subtitles": "Altyazƒ±lar",
            "download_subtitles": "Altyazƒ±larƒ± indir",
            "languages": "Diller:",
            "embed_video": "Videoya g√∂m",
            "embedded_data": "G√∂m√ºl√º Veriler",
            "metadata_desc": "Metadata g√∂m (ba≈ülƒ±k, sanat√ßƒ± vb.)",
            "split_chapters": "B√∂l√ºmlere ayƒ±r",
            "sponsorblock_hint": "SponsorBlock (reklamlarƒ± atla)",
            "cancel": "ƒ∞ptal",
            "download_btn": "ƒ∞ndir",
            "clear_history": "Ge√ßmi≈üi Temizle",
            "history_empty": "ƒ∞ndirme ge√ßmi≈üi bo≈ü",
            "history_desc": "Tamamlanan indirmeler burada g√∂r√ºnecek",
            "search_history": "Ge√ßmi≈üte ara...",
            "play": "Oynat",
            "redownload": "Yeniden ƒ∞ndir",
            "copy_url": "URL Kopyala",
            "add_new": "Yeni Ekle",
            "keyring_empty": "Kimlik bilgisi yok",
            "keyring_desc": "Parola korumalƒ± i√ßeriklere eri≈ümek i√ßin kimlik bilgisi ekleyin",
            "add_credential": "Kimlik Bilgisi Ekle",
            "new_credential": "Yeni Kimlik Bilgisi",
            "edit_credential": "Kimlik Bilgisini D√ºzenle",
            "name_hint": "Ad (√∂rn: YouTube Premium)",
            "name": "Ad",
            "username": "Kullanƒ±cƒ± Adƒ±",
            "password": "≈ûifre",
            "save": "Kaydet",
            "fetching": "Bilgi Alƒ±nƒ±yor",
            "processing": "ƒ∞≈üleniyor",
            "failed": "Hata",
            "paused": "Duraklatƒ±ldƒ±",
            "stop_all": "T√ºm√ºn√º Durdur",
            "finder": "Finder'da G√∂ster",
            "retry": "Tekrarla / Devam Et",
            "stop": "Durdur",
            "log": "Log G√∂ster",
            "remove": "Kaldƒ±r",
            "download_log": "ƒ∞ndirme Logu",
            "close": "Kapat",
            "no_log": "Hen√ºz log yok...",
            "codec": "Codec",
            "auto_h264": "Otomatik (H.264)",
            "codec_warning": "Not: 1080p √ºzeri √ß√∂z√ºn√ºrl√ºkler i√ßin l√ºtfen AV1 veya VP9 codec'ini se√ßin.",
            "support_btn": "Macabolic'i Destekleyin",
            "clear": "Temizle",
            "format": "Format",
            "browser_cookies": "Giri≈ü Kaynaƒüƒ± (Cookies)",
            "none": "Yok",
            "browser_hint": "L√ºtfen daha √∂nce YouTube hesabƒ±nƒ±zla giri≈ü yaptƒ±ƒüƒ±nƒ±z bir tarayƒ±cƒ± se√ßiniz. macOS ilk kullanƒ±mda anahtar zinciri eri≈üimi i√ßin ≈üifre isteyebilir; 'Her Zaman ƒ∞zin Ver'i se√ßerek s√ºreci kalƒ±cƒ± olarak onaylayabilirsiniz.",
            "fix_signin_error": "Ayarlarda √á√∂z",
            "safari_warning": "Not: Safari √ßerezleri i√ßin Sistem Ayarlarƒ± > Gizlilik ve G√ºvenlik > Tam Disk Eri≈üimi kƒ±smƒ±ndan Macabolic'e izin vermeniz gerekir. Safari dƒ±≈üƒ± bir tarayƒ±cƒ± (Chrome, Brave vb.) kullanmanƒ±z √ßok daha kolay olacaktƒ±r.",
            "open_system_settings": "Sistem Ayarlarƒ±nƒ± A√ß",
            "video_codec": "Video Codec",
            "audio_codec": "Ses Codec",
            "codec_auto": "Otomatik (En ƒ∞yi)",
            "codec_settings": "Codec Ayarlarƒ±",
            "reset_to_defaults": "Varsayƒ±lanlara Sƒ±fƒ±rla",
            "download_presets": "ƒ∞ndirme Presetleri",
            "preset_best_quality": "En ƒ∞yi Kalite",
            "preset_max_compatibility": "Maksimum Uyumluluk",
            "preset_smallest_size": "En K√º√ß√ºk Boyut",
            "preset_audio_only": "Sadece Ses",
            "preset_best_quality_desc": "AV1 + Opus, En y√ºksek kalite",
            "preset_max_compatibility_desc": "H.264 + AAC, T√ºm cihazlarda √ßalƒ±≈üƒ±r",
            "preset_smallest_size_desc": "AV1 720p, En k√º√ß√ºk dosya boyutu",
            "preset_audio_only_desc": "Sadece ses indir (M4A)",
            "apply_preset": "Preseti Uygula",
            "preferred_video_codec": "Tercih Edilen Video Codec",
            "preferred_audio_codec": "Tercih Edilen Ses Codec",
            "codec_fallback_note": "Not: Se√ßilen codec mevcut deƒüilse otomatik olarak en iyi alternatif se√ßilir.",
            "res_best": "En ƒ∞yi",
            "res_worst": "En D√º≈ü√ºk",
            "subtitle_format": "Altyazƒ± Formatƒ±",
            "file_exists_title": "Dosya Zaten Mevcut",
            "file_exists_message": "Bu isimde bir dosya zaten var. Ne yapmak istersiniz?",
            "overwrite": "√úzerine Yaz",
            "add_number": "Dosya adƒ±nƒ±n sonuna numara ekle",
            "h264_resolution_warning": "H.264 codec 1080p √ºst√º √ß√∂z√ºn√ºrl√ºkleri desteklemez. L√ºtfen VP9 veya AV1 codec'i se√ßin ya da farklƒ± bir preset kullanƒ±n.",
            "subtitle_output": "Altyazƒ± √áƒ±ktƒ±sƒ±",
            "subtitle_external": "Ayrƒ± Dosya",
            "subtitle_embedded": "G√∂m√ºl√º",
            "h264_preset_info": "H.264 codec se√ßildi. Maksimum kalite 1080p ile sƒ±nƒ±rlƒ±dƒ±r."
        ],
        .english: [
            "home": "Home",
            "downloading": "Downloading",
            "queued": "Queued",
            "completed": "Completed",
            "history": "History",
            "keyring": "Keyring",
            "settings": "Settings",
            "new_download": "Add New Download",
            "url_placeholder": "Download video from YouTube and thousands of sites",
            "stat_downloading": "Downloading",
            "stat_queued": "Queued",
            "stat_completed": "Completed",
            "stat_failed": "Failed",
            "empty_failed": "No failed downloads",
            "download_failed_error": "Download failed: %@",
            "subtitle_download_failed": "Subtitle download failed: %@",
            "too_many_requests": "Too many requests (429). Please select a browser in Settings > Advanced.",
            "preferences": "Preferences",
            "general": "General",
            "download": "Download",
            "advanced": "Advanced",
            "about": "About",
            "theme": "Theme",
            "system": "System",
            "light": "Light",
            "dark": "Dark",
            "language": "Language",
            "save_folder": "Default Save Folder",
            "select": "Select...",
            "updates": "Updates",
            "check_updates": "Check for Updates",
            "update_now": "Update Now",
            "format_settings": "Format Settings",
            "file_type": "Default File Type",
            "video_quality": "Default Video Quality",
            "embed_options": "Embedding Options",
            "embed_thumbnail": "Embed Thumbnail",
            "embed_metadata": "Embed Metadata",
            "concurrent_downloads": "Concurrent Downloads",
            "max": "Maximum",
            "sponsorblock_desc": "SponsorBlock automatically skips sponsor segments in YouTube videos.",
            "ytdlp_update": "Update yt-dlp",
            "update_complete": "‚úÖ Update complete!",
            "update_error": "‚ùå Error:",
            "downloading_ytdlp": "Downloading...",
            "version": "Version",
            "special_thanks": "Special Thanks",
            "credits": "Credits",
            "license": "License",
            "license_desc": "This software is free software. You can redistribute and modify it.",
            "supported_sites": "Supported Sites",
            "other": "Other",
            "empty_downloading": "No videos are currently being downloaded",
            "empty_queued": "No videos waiting in queue",
            "empty_completed": "No completed downloads",
            "video": "Video",
            "audio": "Audio",
            "default_video_resolution": "Default Video Resolution",
            "sponsorblock": "SponsorBlock",
            "app_updates": "App Updates",
            "app_up_to_date": "App is up to date",
            "downloading_update": "Downloading update...",
            "installing_update": "Installing update & restarting...",
            "update_failed": "Update failed!",
            "restart_to_install": "Restart and Install",
            "update_available_title": "New Update Available!",
            "update_available_message": "A new version of Macabolic (v%@) is ready. Would you like to download it now?",
            "later": "Later",
            "app_up_to_date": "App is up to date",
            "downloading_update": "Downloading update...",
            "installing_update": "Installing update & restarting...",
            "update_failed": "Update failed!",
            "restart_to_install": "Restart and Install",
            "latest": "Latest",
            "original_project": "Original Project",
            "view_license": "View License",
            "cancel": "Cancel",
            "download_btn": "Download",
            "clear_history": "Clear History",
            "history_empty": "Download history is empty",
            "history_desc": "Completed downloads will appear here",
            "search_history": "Search in history...",
            "play": "Play",
            "redownload": "Re-download",
            "copy_url": "Copy URL",
            "add_new": "Add New",
            "keyring_empty": "No credentials",
            "keyring_desc": "Add credentials to access password-protected content",
            "add_credential": "Add Credential",
            "new_credential": "New Credential",
            "edit_credential": "Edit Credential",
            "name_hint": "Name (e.g. YouTube Premium)",
            "name": "Name",
            "username": "Username",
            "password": "Password",
            "save": "Save",
            "fetching": "Fetching Info...",
            "processing": "Processing...",
            "failed": "Failed",
            "paused": "Paused",
            "stop_all": "Stop All",
            "finder": "Show in Finder",
            "retry": "Retry / Resume",
            "stop": "Stop",
            "log": "Show Log",
            "remove": "Remove",
            "download_log": "Download Log",
            "close": "Close",
            "no_log": "No log yet...",
            "codec": "Codec",
            "auto_h264": "Auto (H.264)",
            "codec_warning": "Note: For resolutions higher than 1080p, please select AV1 or VP9 codec.",
            "clear": "Clear",
            "support_btn": "Support Macabolic",
            "format": "Format",
            "browser_cookies": "Login Source (Cookies)",
            "none": "None",
            "browser_hint": "Please select a browser where you have previously logged in with your YouTube account. macOS may ask for keychain access on first use; select 'Always Allow' to permanently authorize this.",
            "fix_signin_error": "Fix in Settings",
            "safari_warning": "Note: For Safari cookies, you must grant 'Full Disk Access' to Macabolic in System Settings > Privacy & Security. Using a browser other than Safari (Chrome, Brave, etc.) will be much easier.",
            "open_system_settings": "Open System Settings",
            "whats_new_title": "Macabolic v2.3.0 - What's New",
            "whats_new_message": "‚Ä¢ üóÑÔ∏è Advanced History: Completed and failed downloads are now categorized separately and persist across app sessions.\n‚Ä¢ üìÇ Reorganized Navigation: The sidebar is now split into 'Downloading' and 'History' sections for better organization.\n‚Ä¢ üîÑ Real-time Updates: Download statuses and counts now update automatically without manual navigation.\n‚Ä¢ üîÉ Re-download Support: Easily add completed or failed items back to the download list with a single click.\n‚Ä¢ üç™ Smart Error Guidance: 429 errors now directly guide users to Browser Cookie settings for a quick fix.",
            "video_codec": "Video Codec",
            "additional_arguments": "Additional Arguments (Command Line)",
            "additional_arguments_hint": "e.g. --limit-rate 5M --restrict-filenames",
            "additional_arguments_help": "Check the [official documentation](https://github.com/yt-dlp/yt-dlp#usage-and-options) for all available commands.",
            "audio_codec": "Audio Codec",
            "codec_auto": "Auto (Best Available)",
            "codec_settings": "Codec Settings",
            "reset_to_defaults": "Reset to Defaults",
            "download_presets": "Download Presets",
            "preset_best_quality": "Best Quality",
            "preset_max_compatibility": "Max Compatibility",
            "preset_smallest_size": "Smallest Size",
            "preset_audio_only": "Audio Only",
            "preset_best_quality_desc": "AV1 + Opus, Highest quality",
            "preset_max_compatibility_desc": "H.264 + AAC, Works on all devices",
            "preset_smallest_size_desc": "AV1 720p, Smallest file size",
            "preset_audio_only_desc": "Download audio only (M4A)",
            "apply_preset": "Apply Preset",
            "preferred_video_codec": "Preferred Video Codec",
            "preferred_audio_codec": "Preferred Audio Codec",
            "codec_fallback_note": "Note: If selected codec is unavailable, the best alternative will be used.",
            "res_best": "Best",
            "res_worst": "Worst",
            "subtitle_format": "Subtitle Format",
            "file_exists_title": "File Already Exists",
            "file_exists_message": "A file with this name already exists. What would you like to do?",
            "overwrite": "Overwrite",
            "add_number": "Add number to filename",
            "h264_resolution_warning": "H.264 codec doesn't support resolutions above 1080p. Please select VP9 or AV1 codec, or use a different preset.",
            "subtitle_output": "Subtitle Output",
            "subtitle_external": "Separate File",
            "subtitle_embedded": "Embedded",
            "h264_preset_info": "H.264 codec selected. Maximum quality is limited to 1080p."
        ]
    ]
}
